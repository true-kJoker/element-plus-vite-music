import{C as H,D as q,G as j,H as G,B as K,_ as J,I as M,r as f,a as Q,e as i,j as _,F as T,k as I,l as e,f as A,g as y,p as a,J as $,y as o,i as l,v as N,q as R,x as F,K as W,L as b,M as U,N as X,O as Y,P as Z}from"./index.fc3f095a.js";/* empty css             */import{u as B,a as z,b as tt}from"./table-column.ef6e0896.js";/* empty css                   */const E=H("rank",{state:()=>({currentPage:1,pageSize:10,rank:{id:19723756},songsList:[],topList:[],mediaList:[],rankList:[],rankCount:{},creator:{}}),getters:{},actions:{async getTopListDetail(){this.rankList.length==0&&((await q()).forEach(t=>{t.ToplistType?this.topList.push(t):this.mediaList.push(t)}),this.rank=this.topList[0],this.rankList=this.topList)},async getPlayListTrackAll(){const d=await j(this.rank.id,this.pageSize,(this.currentPage-1)*this.pageSize);this.songsList=d},async getPlaylistDetailDynamic(){const d=await G(this.rank.id);this.rankCount=d},async getPlayListDetail(){const d=await K(this.rank.id);this.creator=d.creator}}});const et={class:"block text-xl text-pink-400 truncate"},at={class:"block text-black text-opacity-50"},st={__name:"Aside",setup(d){const t=E(),{rankList:c}=M(t),u=f([{id:"TOP",name:"\u7279\u8272\u699C"},{id:"Medio",name:"\u5A92\u4F53\u699C"}]);Q(async()=>{t.getTopListDetail(),t.getPlayListTrackAll(),t.getPlaylistDetailDynamic(),t.getPlayListDetail()});let g=f("TOP");const P=async p=>{g.value=p,p=="TOP"?(t.rankList=t.topList,t.rank=t.rankList[0],h.value=t.rank.id,t.getPlayListTrackAll(),t.getPlaylistDetailDynamic(),t.getPlayListDetail()):(t.rankList=t.mediaList,t.rank=t.rankList[0],h.value=t.rank.id,t.getPlayListTrackAll(),t.getPlaylistDetailDynamic(),t.getPlayListDetail())};let h=f(19723756);const m=async(p,C)=>{h.value=C,t.rank=p,t.getPlayListTrackAll(),t.getPlaylistDetailDynamic(),t.getPlayListDetail()};return(p,C)=>{const w=N,S=R;return i(),_(T,null,[(i(!0),_(T,null,I(u.value,n=>(i(),A(w,{class:$(["w-45% inline-block ml-4 rounded-lg cursor-pointer text-center",{"active-top":e(g)===n.id}]),onClick:D=>P(n.id)},{default:y(()=>[a("span",{class:$({"text-white":e(g)===n.id})},o(n.name),3)]),_:2},1032,["class","onClick"]))),256)),(i(!0),_(T,null,I(e(c),n=>(i(),A(w,{key:n.id,class:$([{"active-rank":e(h)===n.id},"w-45% inline-block ml-4 rounded-lg cursor-pointer text-center"]),onClick:D=>m(n,n.id)},{default:y(()=>[l(S,{src:n.coverImgUrl,style:{width:"45px",height:"45px"},class:"float-left mr-4 rounded-lg"},null,8,["src"]),a("span",et,o(n.name),1),a("span",at,o(n.updateFrequency),1)]),_:2},1032,["class","onClick"]))),128))],64)}}};var nt=J(st,[["__scopeId","data-v-14acb33d"]]);const lt={class:"text-3xl font-black"},ot={class:"text-black text-opacity-50 translate-x-3 inline-block"},it={class:"transform translate-y-4"},ct={class:"text-black text-opacity-50 translate-x-3 inline-block"},rt={class:"text-black text-opacity-50 translate-x-6 inline-block"},dt={class:"transform translate-y-8"},_t={class:"text-black text-opacity-50"},ut=a("i",{class:"iconfont icon-playnum"},null,-1),pt={class:"text-black text-opacity-50 translate-x-3 inline-block"},gt=a("i",{class:"iconfont icon-collect"},null,-1),ht={class:"text-black text-opacity-50 translate-x-6 inline-block"},kt=a("i",{class:"iconfont icon-comment"},null,-1),yt={class:"transform translate-y-20"},mt=a("span",{class:"font-black"},"\u6B4C\u5355\u7B80\u4ECB\uFF1A",-1),xt={class:"text-black text-opacity-50"},ft={__name:"Header",setup(d){const t=E(),{rank:c,rankCount:u,creator:g}=M(t);return(P,h)=>{const m=R,p=N;return i(),_(T,null,[l(m,{src:e(c).coverImgUrl,style:{width:"250px",height:"250px"},class:"rounded-lg"},null,8,["src"]),l(p,{class:"inline-block w-75% float-right h-250px rounded-lg"},{default:y(()=>[a("span",lt,o(e(c).name),1),a("span",ot,"("+o(e(B)(e(c).updateTime))+"\u66F4\u65B0)",1),a("div",it,[l(m,{src:e(g).avatarUrl,style:{width:"25px",height:"25px"},class:"rounded-full transform translate-y-2"},null,8,["src"]),a("span",ct,o(e(g).nickname),1),a("span",rt,o(e(B)(e(c).createTime)),1)]),a("div",dt,[a("span",_t,[ut,F(" "+o(e(z)(e(u).playCount)),1)]),a("span",pt,[gt,F(" "+o(e(z)(e(u).bookedCount)),1)]),a("span",ht,[kt,F(" "+o(e(z)(e(u).commentCount)),1)])]),a("div",yt,[mt,a("span",xt,o(e(c).description),1)])]),_:1})],64)}}};const vt=["onClick"],Lt={key:1},bt={key:0,class:"mr-3 iconfont icon-add",title:"\u6DFB\u52A0\u5230\u5217\u8868"},Pt={key:1,class:"iconfont icon-collect",title:"\u6536\u85CF"},Ct={key:2},wt={__name:"Main",setup(d){const t=E(),{currentPage:c,pageSize:u,rank:g,songsList:P}=M(t),h=f(!1),m=f(!1),p=f(!1),C=async r=>{t.pageSize=r,t.getPlayListTrackAll()},w=async r=>{t.currentPage=r,t.getPlayListTrackAll()},S=(r,k,x,O)=>{let v=JSON.parse(JSON.stringify(t.songsList));for(let L=0;L<v.length;L++){const s=v[L];s.id==r.id?s.hoverFlag=!0:s.hoverFlag=!1}t.songsList=JSON.parse(JSON.stringify(v))},n=()=>{for(let r=0;r<t.songsList.length;r++){const k=t.songsList[r];k.hoverFlag=!1}},D=W(),V=r=>{D.id=r,D.getSongUrl()};return(r,k)=>{const x=X,O=Y,v=Z,L=N;return i(),A(L,null,{default:y(()=>[l(O,{data:e(P),onCellMouseEnter:S,onCellMouseLeave:n,stripe:"","row-style":{height:"60px"}},{default:y(()=>[l(x,{type:"index",label:"\u5E8F\u53F7",width:"100"},{default:y(s=>[s.row.hoverFlag?(i(),_("i",{key:0,class:"iconfont icon-play",title:"\u64AD\u653E",onClick:Ft=>V(s.row.id)},null,8,vt)):b("",!0),s.row.hoverFlag?b("",!0):(i(),_("div",Lt,[a("span",null,o(s.$index+1),1)]))]),_:1}),l(x,{prop:"name",label:"\u6B4C\u66F2"}),l(x,{prop:"ar[0].name",label:"\u6B4C\u624B"}),l(x,{prop:"al.name",label:"\u4E13\u8F91"}),l(x,{label:"\u65F6\u957F",width:"100"},{default:y(s=>[s.row.hoverFlag?(i(),_("i",bt)):b("",!0),s.row.hoverFlag?(i(),_("i",Pt)):b("",!0),s.row.hoverFlag?b("",!0):(i(),_("div",Ct,[a("span",null,o(e(tt)(s.row.dt/1e3)),1)]))]),_:1})]),_:1},8,["data"]),l(v,{currentPage:e(c),"onUpdate:currentPage":k[0]||(k[0]=s=>U(c)?c.value=s:null),"page-size":e(u),"onUpdate:page-size":k[1]||(k[1]=s=>U(u)?u.value=s:null),"page-sizes":[10,20,50,100],small:h.value,disabled:p.value,background:m.value,layout:"total,sizes, prev, pager, next",total:e(g).trackCount||100,onSizeChange:C,onCurrentChange:w},null,8,["currentPage","page-size","small","disabled","background","total"])]),_:1})}}};var Dt=J(wt,[["__scopeId","data-v-7589ce68"]]);const Tt={class:"flex mt-10 space-x-4"},St={class:"w-70%"},$t={class:"w-30%"},Et={__name:"index",setup(d){return(t,c)=>(i(),_("div",Tt,[a("div",St,[l(ft),l(Dt)]),a("div",$t,[l(nt)])]))}};export{Et as default};
